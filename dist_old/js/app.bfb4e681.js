(function(e){function a(a){for(var t,l,s=a[0],i=a[1],d=a[2],u=0,p=[];u<s.length;u++)l=s[u],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);c&&c(a);while(p.length)p.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,a=0;a<o.length;a++){for(var n=o[a],t=!0,s=1;s<n.length;s++){var i=n[s];0!==r[i]&&(t=!1)}t&&(o.splice(a--,1),e=l(l.s=n[0]))}return e}var t={},r={app:0},o=[];function l(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=t,l.d=function(e,a,n){l.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,a){if(1&a&&(e=l(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var t in e)l.d(n,t,function(a){return e[a]}.bind(null,t));return n},l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,"a",a),a},l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},l.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=a,s=s.slice();for(var d=0;d<s.length;d++)a(s[d]);var c=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,a,n){e.exports=n("56d7")},"034f":function(e,a,n){"use strict";var t=n("64a9"),r=n.n(t);r.a},"56d7":function(e,a,n){"use strict";n.r(a);n("cadf"),n("551c"),n("f751"),n("097d");var t,r=n("2b0e"),o=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{attrs:{id:"app"},on:{drop:function(a){return a.preventDefault(),e.addFile(a)},dragover:function(e){e.preventDefault()},"!dragover":function(a){return e.dragingOn(a)},"!drop":function(a){return e.dragingOff(a)}}},[n("h1",[e._v("Welcome to SIDCloud")]),n("img",{attrs:{src:e.csdb_release_screenshot}}),n("p"),n("p",[e._v(e._s(e.csdb_release_name)+" "+e._s(e.csdb_release_group))]),n("p"),n("audio",{attrs:{id:"radio",controls:"",preload:"none"}},[n("source",{attrs:{src:e.audio_url,type:"audio/wav"}})]),n("p"),n("b-container",{staticClass:"bv-example-row"},[e._v("\n    Player:\n    "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.player_type,expression:"player_type"}],on:{change:function(a){var n=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.player_type=a.target.multiple?n:n[0]}}},[n("option",[e._v("sidplayfp")]),n("option",[e._v("jsidplay2")])]),n("b-row",{staticClass:"my-1"},[n("b-col",{attrs:{sm:"3"}},[n("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"10px","margin-left":"10px"},attrs:{type:"button",disabled:e.dragin},on:{click:e.Link}},[e._v("Load and stream")])]),n("b-col",{attrs:{sm:"3"}},[n("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px"},attrs:{type:"button",disabled:e.dragin},on:{click:e.Next}},[e._v("Goto next release")])])],1),n("p"),n("b-col",{attrs:{sm:"3"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sid_link,expression:"sid_link"}],staticClass:"form-control",staticStyle:{},attrs:{placeholder:"Paste SID/PRG link and press Enter to play or Drag your SID/PRG file here",disabled:e.dragin},domProps:{value:e.sid_link},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.Link(a)},input:function(a){a.target.composing||(e.sid_link=a.target.value)}}})])],1),n("div",{attrs:{id:"log"}},[e._v(e._s(e.log))])],1)},l=[],s=(n("4917"),n("a481"),n("bc3a")),i=n.n(s),d={data:function(){return{handle_id:0,csdb_releases:null,csdb_release:null,csdb_release_id:null,csdb_release_data:null,csdb_download_links:null,csdb_release_name:"",csdb_release_group:"",csdb_release_credits:"",csdb_release_screenshot:"",release_nr:1,info:null,sid_link:null,response_from_server:null,file:null,dragin:!1,log:"log",audio_url:"",player_type:"sidplayfp"}},name:"app",components:{},methods:{AudioUrl:function(){console.log("Player type: ",this.player_type),null==i.a.defaults.baseURL||void 0===i.a.defaults.baseURL?this.audio_url="/api/v1/audio/"+this.player_type:this.audio_url=i.a.defaults.baseURL+"/api/v1/audio/"+this.player_type},dragingOn:function(){this.dragin=!0},dragingOff:function(){this.dragin=!1},addFile:function(e){var a=this;this.AudioUrl(),t=document.getElementById("radio");var n="/api/v1/audio"+this.player_type;t.pause(),t.currentTime=0;var r=new FormData;r.append("file",e.dataTransfer.files[0]);var o={headers:{"content-type":e.dataTransfer.files[0].type}};i.a.put(n,r,o).then((function(e){console.log("File sent. Response: ",e.data),a.response_from_server=e.data,t.load(),t.play()}))},Next:function(){this.GetCSDBData()},GetCSDBData:function(){var e,a=this;this.csdb_release_name="",this.csdb_release_group="",this.csdb_release_credits="",this.csdb_release_screenshot="",e="/api/v1/csdb_releases",console.log("GetCSDBData() "+e),i.a.get(e).then((function(n){a.csdb_releases=n.data;var t,r=new DOMParser;for(t=0;t<100;t++)if(a.csdb_release=r.parseFromString(a.csdb_releases,"application/xml").getElementsByTagName("description")[a.release_nr++].childNodes[0].nodeValue,a.csdb_release.indexOf(">C64 Demo</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 One-File Demo</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Intro</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 4K Intro</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Crack intro</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 REU Release</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Music</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Music Collection</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Graphics Collection</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Diskmag</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Charts</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Invitation</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 1K Intro</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Fake Demo</a><br /><a href=")>0||a.csdb_release.indexOf(">C128 Release</a><br /><a href=")>0||a.csdb_release.indexOf(">SuperCPU Release</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 DTV</a><br /><a href=")>0||a.csdb_release.indexOf(">C64 Fake Demo</a><br /><a href=")>0)break;a.csdb_release_id=r.parseFromString(a.csdb_releases,"application/xml").getElementsByTagName("link")[a.release_nr].childNodes[0].nodeValue,a.csdb_release_id=parseInt(a.csdb_release_id.replace(/^[^0-9]+/,""),10),e="/api/v1/csdb_release?id="+a.csdb_release_id+"&depth=2",i.a.post(e).then((function(e){a.csdb_release_data=e.data;var n,t,o=(a.csdb_release_data.match(/<Link>/g)||[]).length;console.log("Liczba link√≥w: "+o),a.csdb_download_links=o;var l=!1;for(a.sid_link="",n=0;n<o;n++)if(t=r.parseFromString(a.csdb_release_data,"application/xml").getElementsByTagName("Link")[n].childNodes[0].nodeValue,t.indexOf(".sid")>0){l=!0;break}if(!l)for(n=0;n<o;n++)if(t=r.parseFromString(a.csdb_release_data,"application/xml").getElementsByTagName("Link")[n].childNodes[0].nodeValue,t.indexOf(".prg")>0)break;if(l){a.sid_link=t,a.csdb_release_name=r.parseFromString(a.csdb_release_data,"application/xml").getElementsByTagName("Name")[0].childNodes[0].nodeValue;var s=(a.csdb_release_data.match(/<Group>/g)||[]).length;console.log("Liczba grup: "+s),a.csdb_release_group=s>0?"by ":"";var i=" ";for(n=2;n<s+2;n++)n>2&&(i=", "),a.csdb_release_group+=i+r.parseFromString(a.csdb_release_data,"application/xml").getElementsByTagName("Name")[n].childNodes[0].nodeValue;a.csdb_release_screenshot=r.parseFromString(a.csdb_release_data,"application/xml").getElementsByTagName("ScreenShot")[0].childNodes[0].nodeValue,console.log("Screenshot: "+a.csdb_release_screenshot)}else a.GetCSDBData()}))}))},Link:function(){var e=this;this.AudioUrl(),t=document.getElementById("radio");var a="/api/v1/audio?sid_url="+this.sid_link;console.log("Query = "+a),document.getElementById("log").innerHTML="["+Date.now()+"] start  ",t.pause(),t.currentTime=0,t.addEventListener("waiting",(function(){console.log("player event: waiting"),document.getElementById("log").innerHTML+="["+Date.now()+"] waiting  "})),t.addEventListener("play",(function(){console.log("player event: play"),document.getElementById("log").innerHTML+="["+Date.now()+"] play  "})),t.addEventListener("pause",(function(){console.log("player event: pause"),document.getElementById("log").innerHTML+="["+Date.now()+"] pause  "})),t.addEventListener("ended",(function(){console.log("player event: ended"),document.getElementById("log").innerHTML+="["+Date.now()+"] ended  "})),t.addEventListener("loadstart",(function(){console.log("player event: loadstart"),document.getElementById("log").innerHTML+="["+Date.now()+"] loadstart  "})),t.addEventListener("durationchange",(function(){console.log("player event: durationchange"),document.getElementById("log").innerHTML+="["+Date.now()+"] durationchange  "})),t.addEventListener("loadedmetadata",(function(){console.log("player event: loadedmetadata"),document.getElementById("log").innerHTML+="["+Date.now()+"] loadedmetadata  "})),t.addEventListener("loadeddata",(function(){console.log("player event: loadeddata"),document.getElementById("log").innerHTML+="["+Date.now()+"] loadeddata  "})),t.addEventListener("canplay",(function(){console.log("player event: canplay"),document.getElementById("log").innerHTML+="["+Date.now()+"] canplay  ",t.play(),console.log("Playing...")})),t.addEventListener("canplaythrough",(function(){console.log("player event: canplaythrough"),document.getElementById("log").innerHTML+="["+Date.now()+"] canplaythrough  "})),i.a.post(a).then((function(a){e.response_from_server=a.data,console.log("SID data "+e.response_from_server),t.load(),console.log("Loading...")}))}},created:function(){this.GetCSDBData(),t=document.getElementById("radio"),this.AudioUrl()}},c=d,u=(n("034f"),n("2877")),p=Object(u["a"])(c,o,l,!1,null,null,null),f=p.exports;i.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(f)},axios:i.a}).$mount("#app")},"64a9":function(e,a,n){}});
//# sourceMappingURL=app.bfb4e681.js.map